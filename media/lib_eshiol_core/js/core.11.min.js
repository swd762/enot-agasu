if(typeof(eshiol)==="undefined"){var eshiol={}}eshiol.renderMessages=function(c){var a=document.id("system-message-container");var b=$("system-message");if(!b){b=new Element("dl",{id:"system-message",role:"alert"})}Object.each(c,function(g,e){var f=$$("#system-message dt."+e);if(!f[0]){f=new Element("dt",{"class":e,html:e});f.inject(b)}var d=$$("#system-message dd."+e);if(d[0]){d=d[0];var h=$$("#system-message dd."+e+" ul")[0];Array.each(g,function(l,k,j){var i=new Element("li",{html:l});i.inject(h)},this)}else{var d=new Element("dd",{"class":e});d.addClass("message");var h=new Element("ul");Array.each(g,function(l,k,j){var i=new Element("li",{html:l});i.inject(h)},this)}h.inject(d);d.inject(b)},this);b.inject(a)};eshiol.dump=function(a,g){var f="";if(!g){g=0}var e="";for(var b=0;b<g+1;b++){e+="    "}if(typeof(a)=="object"){for(var c in a){var d=a[c];if(typeof(d)=="object"){f+=e+"'"+c+"' ...\n";f+=dump(d,g+1)}else{f+=e+"'"+c+"' => \""+d+'"\n'}}}else{f="===>"+a+"<===("+typeof(a)+")"}return f};eshiol.sendAjax=function(a,c,k,b){SqueezeBox.close();button=$("toolbar-"+a).getElement("a").innerHTML;$("toolbar-"+a).getElement("span").addClass("icon-32-waiting");img=$("toolbar-"+a).getElement("span").className;Joomla.removeMessages();b=Base64.decode(b);while(b.charCodeAt(b.length-1)==0){b=b.substr(0,b.length-1)}var d=0;var g=0;var h=0;var e=[];for(var f=0;$("cb"+f)!=null;f++){if($("cb"+f).checked){var j=new Request.JSON({cb:$("cb"+f),url:b+"&cid="+$("cb"+f).value+"&"+a+"_id="+c,method:"post",onRequest:function(){},onComplete:function(m,i,l){if(d==e.length){$("toolbar-"+a).getElement("a").innerHTML=button}else{$("toolbar-"+a).getElement("a").innerHTML="<span class='"+img+"'> </span>"+Math.floor(100*d/g)+"%"}},onError:function(l,i){if(i.error&&i.message){alert(i.message)}if(i.messages){eshiol.renderMessages(i.messages)}d++;if(d==e.length){$("toolbar-"+a).getElement("a").innerHTML=button}else{$("toolbar-"+a).getElement("a").innerHTML="<span class='"+img+"'> </span>"+Math.floor(100*d/g)+"%";e[d].send()}},onFailure:function(i){eshiol.renderMessages({error:["Unable to connect the server: "+k]});d++;if(d==e.length){$("toolbar-"+a).getElement("a").innerHTML=button}else{$("toolbar-"+a).getElement("a").innerHTML="<span class='"+img+"'> </span>"+Math.floor(100*d/g)+"%";e[d].send()}},onSuccess:function(i){this.options.cb.checked=false;if(i.error&&i.message){alert(i.message)}if(i.messages){eshiol.renderMessages(i.messages)}d++;if(d==e.length){$("toolbar-"+a).getElement("a").innerHTML=button}else{$("toolbar-"+a).getElement("a").innerHTML="<span class='"+img+"'> </span>"+Math.floor(100*d/g)+"%";e[d].send()}}});e.push(j);g++}}if(e.length){d=0;$("toolbar-"+a).getElement("a").innerHTML="<span class='"+img+"'> </span>0%";e[0].send()}};