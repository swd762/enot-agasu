if(typeof(eshiol)==="undefined"){var eshiol={}}eshiol.version="20.4.37";if(console){console.log("eshiol Library v"+eshiol.version)}Joomla.JText.strings.SUCCESS="Message";eshiol.renderMessages=function(b){var a=document.id("system-message-container");Object.each(b,function(e,d){if(d=="message"){d="success"}var f=$$("#system-message-container div.alert.alert-"+d);if(!f[0]){close=new Element("button",{"class":"close","data-dismiss":"alert",type:"button",html:"&times;"});close.inject(a);f=new Element("div",{"class":"alert alert-"+d});f.inject(a);var c=new Element("h4",{"class":"alert-heading",html:Joomla.JText._(d,d.charAt(0).toUpperCase()+d.slice(1))});c.inject(f)}else{f=f[0]}Array.each(e,function(i,h,g){var j=new Element("p",{html:i});j.inject(f)},this)},this)};eshiol.dump=function(a,g){var f="";if(!g){g=0}var e="";for(var b=0;b<g+1;b++){e+="    "}if(typeof(a)=="object"){for(var c in a){var d=a[c];if(typeof(d)=="object"){f+=e+"'"+c+"' ...\n";f+=eshiol.dump(d,g+1)}else{f+=e+"'"+c+"' => \""+d+'"\n'}}}else{f="===>"+a+"<===("+typeof(a)+")"}return f};eshiol.sendAjax=function(d,g,c){text=$("toolbar-"+d).getElement("button").getElement("span").innerHTML;Joomla.removeMessages();c=Base64.decode(c);while(c.charCodeAt(c.length-1)==0){c=c.substr(0,c.length-1)}var h=0;var f=0;var b=[];for(var e=0;$("cb"+e)!=null;e++){if($("cb"+e).checked){var a=new Request.JSON({cb:$("cb"+e),url:c+"&cid="+$("cb"+e).value,method:"post",onRequest:function(){},onComplete:function(k,i,j){if(h==b.length){$("toolbar-"+d).getElement("button").getElement("span").innerHTML=text}else{$("toolbar-"+d).getElement("button").getElement("span").innerHTML=text+"... "+Math.floor(100*h/f)+"%"}},onError:function(j,i){if(i.error&&i.message){alert(i.message)}if(i.messages){eshiol.renderMessages(i.messages)}h++;if(h==b.length){$("toolbar-"+d).getElement("button").getElement("span").innerHTML=j}else{$("toolbar-"+d).getElement("button").getElement("span").innerHTML=j+"... "+Math.floor(100*h/f)+"%";b[h].send()}},onFailure:function(i){eshiol.renderMessages({error:["Unable to connect the server: "+g]});h++;if(h==b.length){$("toolbar-"+d).getElement("button").getElement("span").innerHTML=text}else{$("toolbar-"+d).getElement("button").getElement("span").innerHTML=text+"... "+Math.floor(100*h/f)+"%";b[h].send()}},onSuccess:function(i){this.options.cb.checked=false;if(i.error&&i.message){alert(i.message)}if(i.messages){eshiol.renderMessages(i.messages)}h++;if(h==b.length){$("toolbar-"+d).getElement("button").getElement("span").innerHTML=text}else{$("toolbar-"+d).getElement("button").getElement("span").innerHTML=text+"... "+Math.floor(100*h/f)+"%";b[h].send()}}});b.push(a);f++}}if(b.length){h=0;$("toolbar-"+d).getElement("button").getElement("span").innerHTML=text+"... 0%";b[0].send()}};eshiol.sendAjaxByDate=function(a,l,b){d1=$(a+"_begin").value;d2=$(a+"_end").value;text=$("toolbar-"+a).getElement("button").getElement("span").innerHTML;Joomla.removeMessages();b=Base64.decode(b);while(b.charCodeAt(b.length-1)==0){b=b.substr(0,b.length-1)}var e=0;var j=0;var f=[];var c=new Date(d1);var g=new Date(d2);var d;while(c<=g){year=c.getFullYear();month="0"+String(c.getMonth()+1);d=month.length;month=month.substring(d,d-2);day="0"+String(c.getDate());d=day.length;day=day.substring(d,d-2);jQuery('input[name="checkall-toggle"]').each(function(){this.checked=false});for(var h=0;$("cb"+h)!=null;h++){if($("cb"+h).checked){if(console){console.log(b+"&cid="+$("cb"+h).value+"&date="+(year+"-"+month+"-"+day))}var k=new Request.JSON({cb:$("cb"+h),url:b+"&cid="+$("cb"+h).value+"&date="+(year+"-"+month+"-"+day),method:"post",onRequest:function(){},onComplete:function(n,i,m){if(e==f.length){$("toolbar-"+a).getElement("button").getElement("span").innerHTML=text}else{$("toolbar-"+a).getElement("button").getElement("span").innerHTML=text+"... "+Math.floor(100*e/j)+"%"}},onError:function(m,i){if(i.error&&i.message){alert(i.message)}if(i.messages){eshiol.renderMessages(i.messages)}e++;if(e==f.length){$("toolbar-"+a).getElement("button").getElement("span").innerHTML=m}else{$("toolbar-"+a).getElement("button").getElement("span").innerHTML=m+"... "+Math.floor(100*e/j)+"%";f[e].send()}},onFailure:function(i){eshiol.renderMessages({error:["Unable to connect the server: "+l]});e++;if(e==f.length){$("toolbar-"+a).getElement("button").getElement("span").innerHTML=text}else{$("toolbar-"+a).getElement("button").getElement("span").innerHTML=text+"... "+Math.floor(100*e/j)+"%";f[e].send()}},onSuccess:function(i){this.options.cb.checked=false;if(i.error&&i.message){alert(i.message)}if(i.messages){eshiol.renderMessages(i.messages)}e++;if(e==f.length){$("toolbar-"+a).getElement("button").getElement("span").innerHTML=text}else{$("toolbar-"+a).getElement("button").getElement("span").innerHTML=text+"... "+Math.floor(100*e/j)+"%";f[e].send()}}});f.push(k);j++}}c.setDate(c.getDate()+1)}if(f.length){e=0;$("toolbar-"+a).getElement("button").getElement("span").innerHTML=text+"... 0%";f[0].send()}};eshiol.XMLToString=function(a){x=(typeof XMLSerializer!=="undefined")?(new window.XMLSerializer()).serializeToString(a):a.xml;return x};